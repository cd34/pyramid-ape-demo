var APE={Config:{identifier:"ape",init:!0,frequency:0,scripts:[]},Client:function(a){if(a)this.core=a}};APE.Client.prototype.eventProxy=[];APE.Client.prototype.fireEvent=function(a,b,c){this.core.fireEvent(a,b,c)};APE.Client.prototype.addEvent=function(a,b,c){var d=b.bind(this),e=this;void 0==this.core?this.eventProxy.push([a,b,c]):(e=this.core.addEvent(a,d,c),this.core.$originalEvents[a]=this.core.$originalEvents[a]||[],this.core.$originalEvents[a][b]=d);return e};
APE.Client.prototype.removeEvent=function(a,b){return this.core.removeEvent(a,b)};APE.Client.prototype.onRaw=function(a,b,c){this.addEvent("raw_"+a.toLowerCase(),b,c)};APE.Client.prototype.onCmd=function(a,b,c){this.addEvent("cmd_"+a.toLowerCase(),b,c)};APE.Client.prototype.onError=function(a,b,c){this.addEvent("error_"+a,b,c)};APE.Client.prototype.cookie={};APE.Client.prototype.cookie.write=function(a,b){document.cookie=a+"="+encodeURIComponent(b)+"; domain="+document.domain};
APE.Client.prototype.cookie.read=function(a){for(var a=a+"=",b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return null};
APE.Client.prototype.load=function(a){a=a||{};a.transport=a.transport||APE.Config.transport||0;a.frequency=a.frequency\u00c2||0;a.domain=a.domain||APE.Config.domain||document.domain;a.scripts=a.scripts||APE.Config.scripts;a.server=a.server||APE.Config.server;a.init=function(a){this.core=a;for(a=0;a<this.eventProxy.length;a++)this.addEvent.apply(this,this.eventProxy[a])}.bind(this);if(2!=a.transport&&"auto"!=a.domain)document.domain=a.domain;if("auto"==a.domain)document.domain=document.domain;var b=
this.cookie.read("APE_Cookie"),c=eval("("+b+")");c?a.frequency=c.frequency+1:b='{"frequency":0}';b=b.replace(RegExp('"frequency":([ 0-9]+)',"g"),'"frequency":'+a.frequency);this.cookie.write("APE_Cookie",b);var d=document.createElement("iframe");d.setAttribute("id","ape_"+a.identifier);d.style.display="none";d.style.position="absolute";d.style.left="-300px";d.style.top="-300px";document.body.appendChild(d);if(2==a.transport){b=d.contentDocument;if(!b)b=d.contentWindow.document;b.open();for(var c=
"<html><head></head>",e=0;e<a.scripts.length;e++)c+='<script src="'+a.scripts[e]+'"><\/script>';b.write(c+"<body></body></html>");b.close()}else if(d.setAttribute("src","http://"+a.frequency+"."+a.server+'/?[{"cmd":"script","params":{"domain":"'+document.domain+'","scripts":["'+a.scripts.join('","')+'"]}}]'),"Gecko"==navigator.product)d.contentWindow.location.href=d.getAttribute("src");d.onload=function(){d.contentWindow.APE?d.contentWindow.APE.init(a):setTimeout(d.onload,100)}};
if(null==Function.prototype.bind)Function.prototype.bind=function(a,b){return this.create({bind:a,arguments:b})};if(null==Function.prototype.create)Function.prototype.create=function(a){var b=this,a=a||{};return function(){var c=a.arguments||arguments;c&&!c.length&&(c=[c]);return b.apply(a.bind||null,c)}};APE.Config.baseUrl="http://ape.cd34.com/ape-jsf";APE.Config.domain="auto";APE.Config.server="ape.cd34.com:3668";
(function(){for(var a=0;a<arguments.length;a++)APE.Config.scripts.push(APE.Config.baseUrl+"/Source/"+arguments[a]+".js")})("mootools-core","Core/APE","Core/Events","Core/Core","Pipe/Pipe","Pipe/PipeProxy","Pipe/PipeMulti","Pipe/PipeSingle","Request/Request","Request/Request.Stack","Request/Request.CycledStack","Transport/Transport.longPolling","Transport/Transport.SSE","Transport/Transport.XHRStreaming","Transport/Transport.JSONP","Core/Utility","Core/JSON");
